<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MdePkg[all]: MdePkg/Include/Ppi/BlockIo.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MdePkg[all]
   &#160;<span id="projectnumber">1.08</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_ppi_2_block_io_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">BlockIo.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_e_f_i___p_e_i___b_l_o_c_k___i_o___m_e_d_i_a.html">EFI_PEI_BLOCK_IO_MEDIA</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___e_f_i___p_e_i___r_e_c_o_v_e_r_y___b_l_o_c_k___i_o___p_p_i.html">_EFI_PEI_RECOVERY_BLOCK_IO_PPI</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a11911ceb04c3fa16e5cd539c743ae52d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a11911ceb04c3fa16e5cd539c743ae52d">EFI_PEI_RECOVERY_BLOCK_IO_PPI_GUID</a></td></tr>
<tr class="separator:a11911ceb04c3fa16e5cd539c743ae52d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a817dd65705c7e0df9dfca0ed1f82dd61"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct___e_f_i___p_e_i___r_e_c_o_v_e_r_y___b_l_o_c_k___i_o___p_p_i.html">_EFI_PEI_RECOVERY_BLOCK_IO_PPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a></td></tr>
<tr class="separator:a817dd65705c7e0df9dfca0ed1f82dd61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a982dffa8deb77a5c22a6b83d9ec32be2"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_ia32_2_processor_bind_8h.html#aae17ebb9ef7279d026817fb22f8aebe9">UINT64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a982dffa8deb77a5c22a6b83d9ec32be2">EFI_PEI_LBA</a></td></tr>
<tr class="separator:a982dffa8deb77a5c22a6b83d9ec32be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38614ed9963a9e6b469f5ef6cde9d8e2"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a38614ed9963a9e6b469f5ef6cde9d8e2">EFI_PEI_GET_NUMBER_BLOCK_DEVICES</a> )(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> *NumberBlockDevices)</td></tr>
<tr class="separator:a38614ed9963a9e6b469f5ef6cde9d8e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c44359978eece48349fcb2ef99a008c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a8c44359978eece48349fcb2ef99a008c">EFI_PEI_GET_DEVICE_MEDIA_INFORMATION</a> )(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> DeviceIndex, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="struct_e_f_i___p_e_i___b_l_o_c_k___i_o___m_e_d_i_a.html">EFI_PEI_BLOCK_IO_MEDIA</a> *MediaInfo)</td></tr>
<tr class="separator:a8c44359978eece48349fcb2ef99a008c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f4dc214a8616576c2f1f2559c27771"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a70f4dc214a8616576c2f1f2559c27771">EFI_PEI_READ_BLOCKS</a> )(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> DeviceIndex, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a982dffa8deb77a5c22a6b83d9ec32be2">EFI_PEI_LBA</a> StartLBA, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> <a class="el" href="_supplicant_8h.html#a06f57ea9385465fee2b92042c6e5b928">BufferSize</a>, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="_shell_8h.html#aa8ff5bd3c2d6cb377b1dd3bbe3e0cfa8">VOID</a> *<a class="el" href="_supplicant_8h.html#ac67e1217dfc7830023855fe9cade358e">Buffer</a>)</td></tr>
<tr class="separator:a70f4dc214a8616576c2f1f2559c27771"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a2d3cd84a10de12ab6244671f532cbb1f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1f">EFI_PEI_BLOCK_DEVICE_TYPE</a> { <br/>
&#160;&#160;<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fac155c5de0c2a0e11bb509356b4fc7964">LegacyFloppy</a> = 0, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fa3c7600ac0b5d7859168df14264555f21">IdeCDROM</a> = 1, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fa193e27fb73def3feb34105d9ee9e229d">IdeLS120</a> = 2, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fab11ca29824f283cc0d5b8e25447c6372">UsbMassStorage</a> = 3, 
<br/>
&#160;&#160;<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fa8268cafd51299d814aba050e5f54f1ac">SD</a> = 4, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fa45336a2b9a687229ab44fecd5ad3814e">EMMC</a> = 5, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fad82f4bc4b1ae483c5d2e51b146338a0e">UfsDevice</a> = 6, 
<a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1fa012f3e9eed8ffa643ff1ce70850da2f9">MaxDeviceType</a>
<br/>
 }</td></tr>
<tr class="separator:a2d3cd84a10de12ab6244671f532cbb1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a458a2631c2c1f9f01224eecc2b0d9661"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_uefi_base_type_8h.html#ad87614428813f71edb2c2d802e9ce2af">EFI_GUID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_ppi_2_block_io_8h.html#a458a2631c2c1f9f01224eecc2b0d9661">gEfiPeiVirtualBlockIoPpiGuid</a></td></tr>
<tr class="separator:a458a2631c2c1f9f01224eecc2b0d9661"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides the services required to access a block I/O device during PEI recovery boot mode.</p>
<p>The Recovery Module PPI and the Device Recovery Module PPI are device neutral. This PPI is device specific and addresses the most common form of recovery media-block I/O devices such as legacy floppy, CD-ROM, or IDE devices.</p>
<p>The Recovery Block I/O PPI is used to access block devices. Because the Recovery Block I/O PPIs that are provided by the PEI ATAPI driver and PEI legacy floppy driver are the same, here we define a set of general PPIs for both drivers to use.</p>
<p>Copyright (c) 2007 - 2018, Intel Corporation. All rights reserved.<br/>
 SPDX-License-Identifier: BSD-2-Clause-Patent</p>
<dl class="section user"><dt>Revision Reference:</dt><dd>This PPI is defined in UEFI Platform Initialization Specification 1.2 Volume 1: Pre-EFI Initialization Core Interface. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a11911ceb04c3fa16e5cd539c743ae52d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EFI_PEI_RECOVERY_BLOCK_IO_PPI_GUID</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">    0x695d8aa1, 0x42ee, 0x4c46, { 0x80, 0x5c, 0x6e, 0xa6, 0xbc, 0xe7, 0x99, 0xe3 } \</div>
<div class="line">  }</div>
</div><!-- fragment --><p>Global ID for EFI_PEI_RECOVERY_BLOCK_IO_PPI </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a8c44359978eece48349fcb2ef99a008c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> * EFI_PEI_GET_DEVICE_MEDIA_INFORMATION)(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> DeviceIndex, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="struct_e_f_i___p_e_i___b_l_o_c_k___i_o___m_e_d_i_a.html">EFI_PEI_BLOCK_IO_MEDIA</a> *MediaInfo)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets a block device's media information.</p>
<p>This function will provide the caller with the specified block device's media information. If the media changes, calling this function will update the media information accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">PeiServices</td><td>General-purpose services that are available to every PEIM </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>Indicates the EFI_PEI_RECOVERY_BLOCK_IO_PPI instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DeviceIndex</td><td>Specifies the block device to which the function wants to talk. Because the driver that implements Block I/O PPIs will manage multiple block devices, the PPIs that want to talk to a single device must specify the device index that was assigned during the enumeration process. This index is a number from one to NumberBlockDevices. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">MediaInfo</td><td>The media information of the specified block media. The caller is responsible for the ownership of this data structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Note:</dt><dd>The MediaInfo structure describes an enumeration of possible block device types. This enumeration exists because no device paths are actually passed across interfaces that describe the type or class of hardware that is publishing the block I/O interface. This enumeration will allow for policy decisions in the Recovery PEIM, such as "Try to recover from legacy floppy first,
    LS-120 second, CD-ROM third." If there are multiple partitions abstracted by a given device type, they should be reported in ascending order; this order also applies to nested partitions, such as legacy MBR, where the outermost partitions would have precedence in the reporting order. The same logic applies to systems such as IDE that have precedence relationships like "Master/Slave" or "Primary/Secondary". The master device should be reported first, the slave second.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>Media information about the specified block device was obtained successfully. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>Cannot get the media information due to a hardware error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a38614ed9963a9e6b469f5ef6cde9d8e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> * EFI_PEI_GET_NUMBER_BLOCK_DEVICES)(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> *NumberBlockDevices)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the count of block I/O devices that one specific block driver detects.</p>
<p>This function is used for getting the count of block I/O devices that one specific block driver detects. To the PEI ATAPI driver, it returns the number of all the detected ATAPI devices it detects during the enumeration process. To the PEI legacy floppy driver, it returns the number of all the legacy devices it finds during its enumeration process. If no device is detected, then the function will return zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">PeiServices</td><td>General-purpose services that are available to every PEIM. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>Indicates the EFI_PEI_RECOVERY_BLOCK_IO_PPI instance. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NumberBlockDevices</td><td>The number of block I/O devices discovered.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The operation performed successfully. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a982dffa8deb77a5c22a6b83d9ec32be2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_ia32_2_processor_bind_8h.html#aae17ebb9ef7279d026817fb22f8aebe9">UINT64</a> <a class="el" href="_ppi_2_block_io_8h.html#a982dffa8deb77a5c22a6b83d9ec32be2">EFI_PEI_LBA</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>All blocks on the recovery device are addressed with a 64-bit Logical Block Address (LBA). </p>

</div>
</div>
<a class="anchor" id="a70f4dc214a8616576c2f1f2559c27771"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_uefi_base_type_8h.html#aa8fe0c70f8531326ad565427ea96c1f4">EFI_STATUS</a>(<a class="el" href="_ebc_2_processor_bind_8h.html#aa3998ed6456694d79e9a45f821f379ed">EFIAPI</a> * EFI_PEI_READ_BLOCKS)(<a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_pi_pei_cis_8h.html#a0e7bc722610916e07cd0819a921643dc">EFI_PEI_SERVICES</a> **PeiServices, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> *<a class="el" href="_ppi_2_mm_control_8h.html#a9b72b028448e2d973a9f4fa637b71951">This</a>, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> DeviceIndex, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ppi_2_block_io_8h.html#a982dffa8deb77a5c22a6b83d9ec32be2">EFI_PEI_LBA</a> StartLBA, <a class="el" href="_base_8h.html#ac2bbd6d630a06a980d9a92ddb9a49928">IN</a> <a class="el" href="_ia32_2_processor_bind_8h.html#ac0b1ca9b01db611e0f7f2080a2699135">UINTN</a> <a class="el" href="_supplicant_8h.html#a06f57ea9385465fee2b92042c6e5b928">BufferSize</a>, <a class="el" href="_base_8h.html#aec78e7a9e90a406a56f859ee456e8eae">OUT</a> <a class="el" href="_shell_8h.html#aa8ff5bd3c2d6cb377b1dd3bbe3e0cfa8">VOID</a> *<a class="el" href="_supplicant_8h.html#ac67e1217dfc7830023855fe9cade358e">Buffer</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reads the requested number of blocks from the specified block device.</p>
<p>The function reads the requested number of blocks from the device. All the blocks are read, or an error is returned. If there is no media in the device, the function returns EFI_NO_MEDIA.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">PeiServices</td><td>General-purpose services that are available to every PEIM. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>Indicates the EFI_PEI_RECOVERY_BLOCK_IO_PPI instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DeviceIndex</td><td>Specifies the block device to which the function wants to talk. Because the driver that implements Block I/O PPIs will manage multiple block devices, PPIs that want to talk to a single device must specify the device index that was assigned during the enumeration process. This index is a number from one to NumberBlockDevices. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">StartLBA</td><td>The starting logical block address (LBA) to read from on the device </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BufferSize</td><td>The size of the Buffer in bytes. This number must be a multiple of the intrinsic block size of the device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Buffer</td><td>A pointer to the destination buffer for the data. The caller is responsible for the ownership of the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was read correctly from the device. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The device reported an error while attempting to perform the read operation. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>The read request contains LBAs that are not valid, or the buffer is not properly aligned. </td></tr>
    <tr><td class="paramname">EFI_NO_MEDIA</td><td>There is no media in the device. </td></tr>
    <tr><td class="paramname">EFI_BAD_BUFFER_SIZE</td><td>The BufferSize parameter is not a multiple of the intrinsic block size of the device. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a817dd65705c7e0df9dfca0ed1f82dd61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___e_f_i___p_e_i___r_e_c_o_v_e_r_y___b_l_o_c_k___i_o___p_p_i.html">_EFI_PEI_RECOVERY_BLOCK_IO_PPI</a> <a class="el" href="_ppi_2_block_io_8h.html#a817dd65705c7e0df9dfca0ed1f82dd61">EFI_PEI_RECOVERY_BLOCK_IO_PPI</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The forward declaration for EFI_PEI_RECOVERY_BLOCK_IO_PPI. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_ppi_2_block_io_8h.html#a2d3cd84a10de12ab6244671f532cbb1f">EFI_PEI_BLOCK_DEVICE_TYPE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>EFI_PEI_BLOCK_DEVICE_TYPE </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fac155c5de0c2a0e11bb509356b4fc7964"></a>LegacyFloppy</em>&#160;</td><td class="fielddoc">
<p>The recovery device is a floppy. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fa3c7600ac0b5d7859168df14264555f21"></a>IdeCDROM</em>&#160;</td><td class="fielddoc">
<p>The recovery device is an IDE CD-ROM. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fa193e27fb73def3feb34105d9ee9e229d"></a>IdeLS120</em>&#160;</td><td class="fielddoc">
<p>The recovery device is an IDE LS-120. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fab11ca29824f283cc0d5b8e25447c6372"></a>UsbMassStorage</em>&#160;</td><td class="fielddoc">
<p>The recovery device is a USB Mass Storage device. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fa8268cafd51299d814aba050e5f54f1ac"></a>SD</em>&#160;</td><td class="fielddoc">
<p>The recovery device is a Secure Digital device. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fa45336a2b9a687229ab44fecd5ad3814e"></a>EMMC</em>&#160;</td><td class="fielddoc">
<p>The recovery device is a eMMC device. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fad82f4bc4b1ae483c5d2e51b146338a0e"></a>UfsDevice</em>&#160;</td><td class="fielddoc">
<p>The recovery device is a Universal Flash Storage device. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a2d3cd84a10de12ab6244671f532cbb1fa012f3e9eed8ffa643ff1ce70850da2f9"></a>MaxDeviceType</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a458a2631c2c1f9f01224eecc2b0d9661"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_uefi_base_type_8h.html#ad87614428813f71edb2c2d802e9ce2af">EFI_GUID</a> gEfiPeiVirtualBlockIoPpiGuid</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_ee16cea0340e4558b8b17c3b12ae3d0b.html">MdePkg</a></li><li class="navelem"><a class="el" href="dir_43dbc6def9233b1fec759bd8d9ab8e67.html">Include</a></li><li class="navelem"><a class="el" href="dir_51f2417dcd5a0e61f471615fd8fdb9b8.html">Ppi</a></li><li class="navelem"><a class="el" href="_ppi_2_block_io_8h.html">BlockIo.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 03:51:06 for MdePkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
