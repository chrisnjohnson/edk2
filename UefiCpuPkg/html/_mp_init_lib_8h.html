<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>UefiCpuPkg[all]: UefiCpuPkg/Include/Library/MpInitLib.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">UefiCpuPkg[all]
   &#160;<span id="projectnumber">0.90</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_mp_init_lib_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">MpInitLib.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:add72648582c22bbcc6af8a0f3acda4b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#add72648582c22bbcc6af8a0f3acda4b5">MpInitLibInitialize</a> (VOID)</td></tr>
<tr class="separator:add72648582c22bbcc6af8a0f3acda4b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c307895d350fa481004412821664ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#af0c307895d350fa481004412821664ce">MpInitLibGetNumberOfProcessors</a> (OUT UINTN *<a class="el" href="_mp_services2_8h.html#a113968e3f1e802198537ade49f81be6e">NumberOfProcessors</a>, OUT UINTN *<a class="el" href="_mp_services2_8h.html#abbf269947dc6e0c8784f9c3ef4c7335c">NumberOfEnabledProcessors</a>)</td></tr>
<tr class="separator:af0c307895d350fa481004412821664ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a512657b6557ac9c0e3be503eb86b3491"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a512657b6557ac9c0e3be503eb86b3491">MpInitLibGetProcessorInfo</a> (IN UINTN <a class="el" href="_mp_services2_8h.html#a17a2bc0f8fc147951988da0295be7469">ProcessorNumber</a>, OUT EFI_PROCESSOR_INFORMATION *<a class="el" href="_mp_services2_8h.html#af1957dec3675e8ce3260aa90ac2c62b8">ProcessorInfoBuffer</a>, OUT EFI_HEALTH_FLAGS *HealthData)</td></tr>
<tr class="separator:a512657b6557ac9c0e3be503eb86b3491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50cf11ec0487331ee1fcf5b926e11be2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a50cf11ec0487331ee1fcf5b926e11be2">MpInitLibStartupAllAPs</a> (IN EFI_AP_PROCEDURE <a class="el" href="_mp_services2_8h.html#a99aaab118065b812d0c166509e387135">Procedure</a>, IN BOOLEAN <a class="el" href="_mp_services2_8h.html#a9ec91e3c5633ca52983ebc434baece80">SingleThread</a>, IN EFI_EVENT WaitEvent, IN UINTN <a class="el" href="_mp_services2_8h.html#a9ed2a408365846254c56a853cc4c7097">TimeoutInMicroseconds</a>, IN VOID *<a class="el" href="_mp_services2_8h.html#a84a9d5ffbaf99580f30569551b9a85d9">ProcedureArgument</a>, OUT UINTN **FailedCpuList)</td></tr>
<tr class="separator:a50cf11ec0487331ee1fcf5b926e11be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a217fbe3cdc0b8045578aecd03c8bb6ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a217fbe3cdc0b8045578aecd03c8bb6ba">MpInitLibStartupThisAP</a> (IN EFI_AP_PROCEDURE <a class="el" href="_mp_services2_8h.html#a99aaab118065b812d0c166509e387135">Procedure</a>, IN UINTN <a class="el" href="_mp_services2_8h.html#a17a2bc0f8fc147951988da0295be7469">ProcessorNumber</a>, IN EFI_EVENT WaitEvent, IN UINTN <a class="el" href="_mp_services2_8h.html#a9ed2a408365846254c56a853cc4c7097">TimeoutInMicroseconds</a>, IN VOID *<a class="el" href="_mp_services2_8h.html#a84a9d5ffbaf99580f30569551b9a85d9">ProcedureArgument</a>, OUT BOOLEAN *Finished)</td></tr>
<tr class="separator:a217fbe3cdc0b8045578aecd03c8bb6ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a511930acaf02d759d186a96b6e6009a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a511930acaf02d759d186a96b6e6009a4">MpInitLibSwitchBSP</a> (IN UINTN <a class="el" href="_mp_services2_8h.html#a17a2bc0f8fc147951988da0295be7469">ProcessorNumber</a>, IN BOOLEAN <a class="el" href="_mp_services2_8h.html#a487d41dfa9270dcb323facc52e3e2be4">EnableOldBSP</a>)</td></tr>
<tr class="separator:a511930acaf02d759d186a96b6e6009a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf96cc405c4efddfb7d080acc23227c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a3cf96cc405c4efddfb7d080acc23227c">MpInitLibEnableDisableAP</a> (IN UINTN <a class="el" href="_mp_services2_8h.html#a17a2bc0f8fc147951988da0295be7469">ProcessorNumber</a>, IN BOOLEAN <a class="el" href="_mp_services2_8h.html#a3afb13091137904768f49f0cabeb97c2">EnableAP</a>, IN UINT32 *<a class="el" href="_mp_services2_8h.html#a1b1e3f0125bbfd9f86c8aea72a975799">HealthFlag</a>)</td></tr>
<tr class="separator:a3cf96cc405c4efddfb7d080acc23227c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0676b6bdf8540721a54d6708f05eb6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#a2c0676b6bdf8540721a54d6708f05eb6">MpInitLibWhoAmI</a> (OUT UINTN *<a class="el" href="_mp_services2_8h.html#a17a2bc0f8fc147951988da0295be7469">ProcessorNumber</a>)</td></tr>
<tr class="separator:a2c0676b6bdf8540721a54d6708f05eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6880f1151fbe066b345655b2825aedd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_mp_init_lib_8h.html#ad6880f1151fbe066b345655b2825aedd">MpInitLibStartupAllCPUs</a> (IN EFI_AP_PROCEDURE <a class="el" href="_mp_services2_8h.html#a99aaab118065b812d0c166509e387135">Procedure</a>, IN UINTN <a class="el" href="_mp_services2_8h.html#a9ed2a408365846254c56a853cc4c7097">TimeoutInMicroseconds</a>, IN VOID *<a class="el" href="_mp_services2_8h.html#a84a9d5ffbaf99580f30569551b9a85d9">ProcedureArgument</a>)</td></tr>
<tr class="separator:ad6880f1151fbe066b345655b2825aedd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Multiple-Processor initialization Library.</p>
<p>Copyright (c) 2016 - 2019, Intel Corporation. All rights reserved.<br/>
 SPDX-License-Identifier: BSD-2-Clause-Patent </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3cf96cc405c4efddfb7d080acc23227c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibEnableDisableAP </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>ProcessorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN BOOLEAN&#160;</td>
          <td class="paramname"><em>EnableAP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT32 *&#160;</td>
          <td class="paramname"><em>HealthFlag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This service lets the caller enable or disable an AP from this point onward. This service may only be called from the BSP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcessorNumber</td><td>The handle number of AP. The range is from 0 to the total number of logical processors minus 1. The total number of logical processors can be retrieved by <a class="el" href="_mp_init_lib_8h.html#af0c307895d350fa481004412821664ce">MpInitLibGetNumberOfProcessors()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">EnableAP</td><td>Specifies the new state for the processor for enabled, FALSE for disabled. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">HealthFlag</td><td>If not NULL, a pointer to a value that specifies the new health status of the AP. This flag corresponds to StatusFlag defined in EFI_MP_SERVICES_PROTOCOL.GetProcessorInfo(). Only the PROCESSOR_HEALTH_STATUS_BIT is used. All other bits are ignored. If it is NULL, this parameter is ignored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The specified AP was enabled or disabled successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Enabling or disabling an AP cannot be completed prior to this service returning. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Enabling or disabling an AP is not supported. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The calling processor is an AP. </td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>Processor with the handle specified by ProcessorNumber does not exist. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>ProcessorNumber specifies the BSP. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af0c307895d350fa481004412821664ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibGetNumberOfProcessors </td>
          <td>(</td>
          <td class="paramtype">OUT UINTN *&#160;</td>
          <td class="paramname"><em>NumberOfProcessors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT UINTN *&#160;</td>
          <td class="paramname"><em>NumberOfEnabledProcessors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the number of logical processor in the platform and the number of those logical processors that are enabled on this boot. This service may only be called from the BSP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">NumberOfProcessors</td><td>Pointer to the total number of logical processors in the system, including the BSP and disabled APs. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NumberOfEnabledProcessors</td><td>Pointer to the number of enabled logical processors that exist in system, including the BSP.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The number of logical processors and enabled logical processors was retrieved. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The calling processor is an AP. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>NumberOfProcessors is NULL and NumberOfEnabledProcessors is NULL. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a512657b6557ac9c0e3be503eb86b3491"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibGetProcessorInfo </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>ProcessorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT EFI_PROCESSOR_INFORMATION *&#160;</td>
          <td class="paramname"><em>ProcessorInfoBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT EFI_HEALTH_FLAGS *&#160;</td>
          <td class="paramname"><em>HealthData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets detailed MP-related information on the requested processor at the instant this call is made. This service may only be called from the BSP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcessorNumber</td><td>The handle number of processor. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ProcessorInfoBuffer</td><td>A pointer to the buffer where information for the requested processor is deposited. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">HealthData</td><td>Return processor health data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>Processor information was returned. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The calling processor is an AP. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>ProcessorInfoBuffer is NULL. </td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>The processor with the handle specified by ProcessorNumber does not exist in the platform. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="add72648582c22bbcc6af8a0f3acda4b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibInitialize </td>
          <td>(</td>
          <td class="paramtype">VOID&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MP Initialize Library initialization.</p>
<p>This service will allocate AP reset vector and wakeup all APs to do APs initialization.</p>
<p>This service must be invoked before all other MP Initialize Library service are invoked.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>MP initialization succeeds. </td></tr>
    <tr><td class="paramname">Others</td><td>MP initialization fails. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a50cf11ec0487331ee1fcf5b926e11be2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibStartupAllAPs </td>
          <td>(</td>
          <td class="paramtype">IN EFI_AP_PROCEDURE&#160;</td>
          <td class="paramname"><em>Procedure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN BOOLEAN&#160;</td>
          <td class="paramname"><em>SingleThread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_EVENT&#160;</td>
          <td class="paramname"><em>WaitEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>TimeoutInMicroseconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN VOID *&#160;</td>
          <td class="paramname"><em>ProcedureArgument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT UINTN **&#160;</td>
          <td class="paramname"><em>FailedCpuList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This service executes a caller provided function on all enabled APs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Procedure</td><td>A pointer to the function to be run on enabled APs of the system. See type EFI_AP_PROCEDURE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">SingleThread</td><td>If TRUE, then all the enabled APs execute the function specified by Procedure one by one, in ascending order of processor handle number. If FALSE, then all the enabled APs execute the function specified by Procedure simultaneously. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">WaitEvent</td><td>The event created by the caller with CreateEvent() service. If it is NULL, then execute in blocking mode. BSP waits until all APs finish or TimeoutInMicroSeconds expires. If it's not NULL, then execute in non-blocking mode. BSP requests the function specified by Procedure to be started on all the enabled APs, and go on executing immediately. If all return from Procedure, or TimeoutInMicroSeconds expires, this event is signaled. The BSP can use the CheckEvent() or WaitForEvent() services to check the state of event. Type EFI_EVENT is defined in CreateEvent() in the Unified Extensible Firmware Interface Specification. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">TimeoutInMicroseconds</td><td>Indicates the time limit in microseconds for APs to return from Procedure, either for blocking or non-blocking mode. Zero means infinity. If the timeout expires before all APs return from Procedure, then Procedure on the failed APs is terminated. All enabled APs are available for next function assigned by <a class="el" href="_mp_init_lib_8h.html#a50cf11ec0487331ee1fcf5b926e11be2">MpInitLibStartupAllAPs()</a> or MPInitLibStartupThisAP(). If the timeout expires in blocking mode, BSP returns EFI_TIMEOUT. If the timeout expires in non-blocking mode, WaitEvent is signaled with SignalEvent(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcedureArgument</td><td>The parameter passed into Procedure for all APs. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">FailedCpuList</td><td>If NULL, this parameter is ignored. Otherwise, if all APs finish successfully, then its content is set to NULL. If not all APs finish before timeout expires, then its content is set to address of the buffer holding handle numbers of the failed APs. The buffer is allocated by MP Initialization library, and it's the caller's responsibility to free the buffer with FreePool() service. In blocking mode, it is ready for consumption when the call returns. In non-blocking mode, it is ready when WaitEvent is signaled. The list of failed CPU is terminated by END_OF_CPU_LIST.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>In blocking mode, all APs have finished before the timeout expired. </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>In non-blocking mode, function has been dispatched to all enabled APs. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>A non-blocking mode request was made after the UEFI event EFI_EVENT_GROUP_READY_TO_BOOT was signaled. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>WaitEvent is not NULL if non-blocking mode is not supported. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>Caller processor is AP. </td></tr>
    <tr><td class="paramname">EFI_NOT_STARTED</td><td>No enabled APs exist in the system. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>Any enabled APs are busy. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
    <tr><td class="paramname">EFI_TIMEOUT</td><td>In blocking mode, the timeout expired before all enabled APs have finished. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Procedure is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6880f1151fbe066b345655b2825aedd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibStartupAllCPUs </td>
          <td>(</td>
          <td class="paramtype">IN EFI_AP_PROCEDURE&#160;</td>
          <td class="paramname"><em>Procedure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>TimeoutInMicroseconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN VOID *&#160;</td>
          <td class="paramname"><em>ProcedureArgument</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This service executes a caller provided function on all enabled CPUs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Procedure</td><td>A pointer to the function to be run on enabled APs of the system. See type EFI_AP_PROCEDURE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">TimeoutInMicroseconds</td><td>Indicates the time limit in microseconds for APs to return from Procedure, either for blocking or non-blocking mode. Zero means infinity. TimeoutInMicroseconds is ignored for BSP. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcedureArgument</td><td>The parameter passed into Procedure for all APs.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>In blocking mode, all CPUs have finished before the timeout expired. </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>In non-blocking mode, function has been dispatched to all enabled CPUs. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>Caller processor is AP. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>Any enabled APs are busy. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
    <tr><td class="paramname">EFI_TIMEOUT</td><td>In blocking mode, the timeout expired before all enabled APs have finished. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Procedure is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a217fbe3cdc0b8045578aecd03c8bb6ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibStartupThisAP </td>
          <td>(</td>
          <td class="paramtype">IN EFI_AP_PROCEDURE&#160;</td>
          <td class="paramname"><em>Procedure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>ProcessorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN EFI_EVENT&#160;</td>
          <td class="paramname"><em>WaitEvent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>TimeoutInMicroseconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN VOID *&#160;</td>
          <td class="paramname"><em>ProcedureArgument</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT BOOLEAN *&#160;</td>
          <td class="paramname"><em>Finished</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This service lets the caller get one enabled AP to execute a caller-provided function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Procedure</td><td>A pointer to the function to be run on the designated AP of the system. See type EFI_AP_PROCEDURE. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcessorNumber</td><td>The handle number of the AP. The range is from 0 to the total number of logical processors minus 1. The total number of logical processors can be retrieved by <a class="el" href="_mp_init_lib_8h.html#af0c307895d350fa481004412821664ce">MpInitLibGetNumberOfProcessors()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">WaitEvent</td><td>The event created by the caller with CreateEvent() service. If it is NULL, then execute in blocking mode. BSP waits until this AP finish or TimeoutInMicroSeconds expires. If it's not NULL, then execute in non-blocking mode. BSP requests the function specified by Procedure to be started on this AP, and go on executing immediately. If this AP return from Procedure or TimeoutInMicroSeconds expires, this event is signaled. The BSP can use the CheckEvent() or WaitForEvent() services to check the state of event. Type EFI_EVENT is defined in CreateEvent() in the Unified Extensible Firmware Interface Specification. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">TimeoutInMicroseconds</td><td>Indicates the time limit in microseconds for this AP to finish this Procedure, either for blocking or non-blocking mode. Zero means infinity. If the timeout expires before this AP returns from Procedure, then Procedure on the AP is terminated. The AP is available for next function assigned by <a class="el" href="_mp_init_lib_8h.html#a50cf11ec0487331ee1fcf5b926e11be2">MpInitLibStartupAllAPs()</a> or <a class="el" href="_mp_init_lib_8h.html#a217fbe3cdc0b8045578aecd03c8bb6ba">MpInitLibStartupThisAP()</a>. If the timeout expires in blocking mode, BSP returns EFI_TIMEOUT. If the timeout expires in non-blocking mode, WaitEvent is signaled with SignalEvent(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcedureArgument</td><td>The parameter passed into Procedure on the specified AP. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Finished</td><td>If NULL, this parameter is ignored. In blocking mode, this parameter is ignored. In non-blocking mode, if AP returns from Procedure before the timeout expires, its content is set to TRUE. Otherwise, the value is set to FALSE. The caller can determine if the AP returned from Procedure by evaluating this value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>In blocking mode, specified AP finished before the timeout expires. </td></tr>
    <tr><td class="paramname">EFI_SUCCESS</td><td>In non-blocking mode, the function has been dispatched to specified AP. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>A non-blocking mode request was made after the UEFI event EFI_EVENT_GROUP_READY_TO_BOOT was signaled. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>WaitEvent is not NULL if non-blocking mode is not supported. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The calling processor is an AP. </td></tr>
    <tr><td class="paramname">EFI_TIMEOUT</td><td>In blocking mode, the timeout expired before the specified AP has finished. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>The specified AP is busy. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>The processor with the handle specified by ProcessorNumber does not exist. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>ProcessorNumber specifies the BSP or disabled AP. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Procedure is NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a511930acaf02d759d186a96b6e6009a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibSwitchBSP </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>ProcessorNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN BOOLEAN&#160;</td>
          <td class="paramname"><em>EnableOldBSP</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This service switches the requested AP to be the BSP from that point onward. This service changes the BSP for all purposes. This call can only be performed by the current BSP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ProcessorNumber</td><td>The handle number of AP that is to become the new BSP. The range is from 0 to the total number of logical processors minus 1. The total number of logical processors can be retrieved by <a class="el" href="_mp_init_lib_8h.html#af0c307895d350fa481004412821664ce">MpInitLibGetNumberOfProcessors()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">EnableOldBSP</td><td>If TRUE, then the old BSP will be listed as an enabled AP. Otherwise, it will be disabled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>BSP successfully switched. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Switching the BSP cannot be completed prior to this service returning. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Switching the BSP is not supported. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The calling processor is an AP. </td></tr>
    <tr><td class="paramname">EFI_NOT_FOUND</td><td>The processor with the handle specified by ProcessorNumber does not exist. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>ProcessorNumber specifies the current BSP or a disabled AP. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>The specified AP is busy. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2c0676b6bdf8540721a54d6708f05eb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_smm_cpu_service_8h.html#aa912fa40d94e864cadb282680c18a4c1">EFI_STATUS</a> EFIAPI MpInitLibWhoAmI </td>
          <td>(</td>
          <td class="paramtype">OUT UINTN *&#160;</td>
          <td class="paramname"><em>ProcessorNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This return the handle number for the calling processor. This service may be called from the BSP and APs.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ProcessorNumber</td><td>Pointer to the handle number of AP. The range is from 0 to the total number of logical processors minus 1. The total number of logical processors can be retrieved by <a class="el" href="_mp_init_lib_8h.html#af0c307895d350fa481004412821664ce">MpInitLibGetNumberOfProcessors()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The current processor handle number was returned in ProcessorNumber. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>ProcessorNumber is NULL. </td></tr>
    <tr><td class="paramname">EFI_NOT_READY</td><td>MP Initialize Library is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bf5121888dfe870556fe9875eb4b3269.html">UefiCpuPkg</a></li><li class="navelem"><a class="el" href="dir_e701b125b1179e59bad921214df48aa3.html">Include</a></li><li class="navelem"><a class="el" href="dir_579c03b735c88d551dba5875fcdbb8bd.html">Library</a></li><li class="navelem"><a class="el" href="_mp_init_lib_8h.html">MpInitLib.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 03:41:28 for UefiCpuPkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
