<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ArmPlatformPkg[all]: ArmPlatformPkg/Include/Library/PL011UartLib.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ArmPlatformPkg[all]
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_p_l011_uart_lib_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PL011UartLib.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a04004620e97d632ddd308bbea9ef2dad"><td class="memItemLeft" align="right" valign="top">RETURN_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#a04004620e97d632ddd308bbea9ef2dad">PL011UartInitializePort</a> (IN UINTN UartBase, IN UINT32 UartClkInHz, IN OUT UINT64 *BaudRate, IN OUT UINT32 *ReceiveFifoDepth, IN OUT EFI_PARITY_TYPE *Parity, IN OUT UINT8 *DataBits, IN OUT EFI_STOP_BITS_TYPE *StopBits)</td></tr>
<tr class="separator:a04004620e97d632ddd308bbea9ef2dad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff7bbc73f0ced2af6721847e1c490ef"><td class="memItemLeft" align="right" valign="top">RETURN_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#a0ff7bbc73f0ced2af6721847e1c490ef">PL011UartSetControl</a> (IN UINTN UartBase, IN UINT32 Control)</td></tr>
<tr class="separator:a0ff7bbc73f0ced2af6721847e1c490ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6ec5b38a43075dccbc88e76b144102"><td class="memItemLeft" align="right" valign="top">RETURN_STATUS EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#afb6ec5b38a43075dccbc88e76b144102">PL011UartGetControl</a> (IN UINTN UartBase, OUT UINT32 *Control)</td></tr>
<tr class="separator:afb6ec5b38a43075dccbc88e76b144102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e732f4ef470fd2051d6a8e3a9d2cae4"><td class="memItemLeft" align="right" valign="top">UINTN EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#a3e732f4ef470fd2051d6a8e3a9d2cae4">PL011UartWrite</a> (IN UINTN UartBase, IN UINT8 *Buffer, IN UINTN NumberOfBytes)</td></tr>
<tr class="separator:a3e732f4ef470fd2051d6a8e3a9d2cae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a645c1b31cb79de3d3a1ce6fc71434753"><td class="memItemLeft" align="right" valign="top">UINTN EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#a645c1b31cb79de3d3a1ce6fc71434753">PL011UartRead</a> (IN UINTN UartBase, OUT UINT8 *Buffer, IN UINTN NumberOfBytes)</td></tr>
<tr class="separator:a645c1b31cb79de3d3a1ce6fc71434753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1dd01aba5001b84661a153760721e83"><td class="memItemLeft" align="right" valign="top">BOOLEAN EFIAPI&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_p_l011_uart_lib_8h.html#af1dd01aba5001b84661a153760721e83">PL011UartPoll</a> (IN UINTN UartBase)</td></tr>
<tr class="separator:af1dd01aba5001b84661a153760721e83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Copyright (c) 2011-2016, ARM Limited. All rights reserved.</p>
<p>SPDX-License-Identifier: BSD-2-Clause-Patent </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afb6ec5b38a43075dccbc88e76b144102"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RETURN_STATUS EFIAPI PL011UartGetControl </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT UINT32 *&#160;</td>
          <td class="paramname"><em>Control</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the status of the control bits on a serial device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">UartBase</td><td>UART registers base address </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Control</td><td>Status of the control bits on a serial device : <pre class="fragment">                   . EFI_SERIAL_DATA_CLEAR_TO_SEND,
                     EFI_SERIAL_DATA_SET_READY,
                     EFI_SERIAL_RING_INDICATE,
                     EFI_SERIAL_CARRIER_DETECT,
                     EFI_SERIAL_REQUEST_TO_SEND,
                     EFI_SERIAL_DATA_TERMINAL_READY
                     are all related to the DTE (Data Terminal Equipment)
                     and DCE (Data Communication Equipment) modes of
                     operation of the serial device.
                   . EFI_SERIAL_INPUT_BUFFER_EMPTY : equal to one if the
                     receive buffer is empty, 0 otherwise.
                   . EFI_SERIAL_OUTPUT_BUFFER_EMPTY : equal to one if the
                     transmit buffer is empty, 0 otherwise.
                   . EFI_SERIAL_HARDWARE_LOOPBACK_ENABLE : equal to one if
                     the hardware loopback is enabled (the output feeds the
                     receive buffer), 0 otherwise.
                   . EFI_SERIAL_SOFTWARE_LOOPBACK_ENABLE : equal to one if
                     a loopback is accomplished by software, 0 otherwise.
                   . EFI_SERIAL_HARDWARE_FLOW_CONTROL_ENABLE : equal to
                     one if the hardware flow control based on CTS (Clear
                     To Send) and RTS (Ready To Send) control signals is
                     enabled, 0 otherwise.
</pre></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RETURN_SUCCESS</td><td>The control bits were read from the serial device. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a04004620e97d632ddd308bbea9ef2dad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RETURN_STATUS EFIAPI PL011UartInitializePort </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT32&#160;</td>
          <td class="paramname"><em>UartClkInHz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT UINT64 *&#160;</td>
          <td class="paramname"><em>BaudRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT UINT32 *&#160;</td>
          <td class="paramname"><em>ReceiveFifoDepth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT EFI_PARITY_TYPE *&#160;</td>
          <td class="paramname"><em>Parity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT UINT8 *&#160;</td>
          <td class="paramname"><em>DataBits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN OUT EFI_STOP_BITS_TYPE *&#160;</td>
          <td class="paramname"><em>StopBits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialise the serial port to the specified settings. All unspecified settings will be set to the default values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">UartBase</td><td>The base address of the serial device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">UartClkInHz</td><td>The clock in Hz for the serial device. Ignored if the PCD PL011UartInteger is not 0 </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">in</td><td>out] BaudRate The baud rate of the serial device. If the baud rate is not supported, the speed will be reduced to the nearest supported one and the variable's value will be updated accordingly. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">in</td><td>out] ReceiveFifoDepth The number of characters the device will buffer on input. Value of 0 will use the device's default FIFO depth. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">in</td><td>out] Parity If applicable, this is the EFI_PARITY_TYPE that is computed or checked as each character is transmitted or received. If the device does not support parity, the value is the default parity value. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">in</td><td>out] DataBits The number of data bits in each character. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">in</td><td>out] StopBits If applicable, the EFI_STOP_BITS_TYPE number of stop bits per character. If the device does not support stop bits, the value is the default stop bit value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RETURN_SUCCESS</td><td>All attributes were set correctly on the serial device. </td></tr>
    <tr><td class="paramname">RETURN_INVALID_PARAMETER</td><td>One or more of the attributes has an unsupported value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af1dd01aba5001b84661a153760721e83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOLEAN EFIAPI PL011UartPoll </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check to see if any data is available to be read from the debug device.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">TRUE</td><td>At least one byte of data is available to be read </td></tr>
    <tr><td class="paramname">FALSE</td><td>No data is available to be read </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a645c1b31cb79de3d3a1ce6fc71434753"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINTN EFIAPI PL011UartRead </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OUT UINT8 *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>NumberOfBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data from serial device and save the data in buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Buffer</td><td>Point of data buffer which need to be written. </td></tr>
    <tr><td class="paramname">NumberOfBytes</td><td>Number of output bytes which are cached in Buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Read data failed. </td></tr>
    <tr><td class="paramname">!0</td><td>Actual number of bytes read from serial device. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0ff7bbc73f0ced2af6721847e1c490ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RETURN_STATUS EFIAPI PL011UartSetControl </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT32&#160;</td>
          <td class="paramname"><em>Control</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assert or deassert the control signals on a serial port. The following control signals are set according their bit settings : . Request to Send . Data Terminal Ready</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">UartBase</td><td>UART registers base address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Control</td><td>The following bits are taken into account : . EFI_SERIAL_REQUEST_TO_SEND : assert/deassert the "Request To Send" control signal if this bit is equal to one/zero. . EFI_SERIAL_DATA_TERMINAL_READY : assert/deassert the "Data Terminal Ready" control signal if this bit is equal to one/zero. . EFI_SERIAL_HARDWARE_LOOPBACK_ENABLE : enable/disable the hardware loopback if this bit is equal to one/zero. . EFI_SERIAL_SOFTWARE_LOOPBACK_ENABLE : not supported. . EFI_SERIAL_HARDWARE_FLOW_CONTROL_ENABLE : enable/ disable the hardware flow control based on CTS (Clear To Send) and RTS (Ready To Send) control signals.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RETURN_SUCCESS</td><td>The new control bits were set on the device. </td></tr>
    <tr><td class="paramname">RETURN_UNSUPPORTED</td><td>The device does not support this operation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3e732f4ef470fd2051d6a8e3a9d2cae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UINTN EFIAPI PL011UartWrite </td>
          <td>(</td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>UartBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINT8 *&#160;</td>
          <td class="paramname"><em>Buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IN UINTN&#160;</td>
          <td class="paramname"><em>NumberOfBytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write data to serial device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Buffer</td><td>Point of data buffer which need to be written. </td></tr>
    <tr><td class="paramname">NumberOfBytes</td><td>Number of output bytes which are cached in Buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Write data failed. </td></tr>
    <tr><td class="paramname">!0</td><td>Actual number of bytes written to serial device. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8ef68730bc42b716c24a223093d9e886.html">ArmPlatformPkg</a></li><li class="navelem"><a class="el" href="dir_dc1d02ef8353439320296780696c1c19.html">Include</a></li><li class="navelem"><a class="el" href="dir_3daf4066796982816fed56de641fa17f.html">Library</a></li><li class="navelem"><a class="el" href="_p_l011_uart_lib_8h.html">PL011UartLib.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 03:40:26 for ArmPlatformPkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
