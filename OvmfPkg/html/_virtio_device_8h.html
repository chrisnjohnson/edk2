<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>OvmfPkg[all]: OvmfPkg/Include/Protocol/VirtioDevice.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OvmfPkg[all]
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_virtio_device_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">VirtioDevice.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___v_i_r_t_i_o___d_e_v_i_c_e___p_r_o_t_o_c_o_l.html">_VIRTIO_DEVICE_PROTOCOL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a47557f83dd8011c4934465b9b523e0da"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a47557f83dd8011c4934465b9b523e0da">VIRTIO_SPEC_REVISION</a>(major, minor, revision)&#160;&#160;&#160;((((major) &amp; 0xFF) &lt;&lt; 24) | (((minor) &amp; 0xFF) &lt;&lt; 16) | ((revision) &amp; 0xFFFF))</td></tr>
<tr class="separator:a47557f83dd8011c4934465b9b523e0da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e175eb8ef0b4465749856ede620b39a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a0e175eb8ef0b4465749856ede620b39a">VIRTIO_DEVICE_PROTOCOL_GUID</a></td></tr>
<tr class="separator:a0e175eb8ef0b4465749856ede620b39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab6aacc5a49a155b55afafd5bec754c84"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct___v_i_r_t_i_o___d_e_v_i_c_e___p_r_o_t_o_c_o_l.html">_VIRTIO_DEVICE_PROTOCOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a></td></tr>
<tr class="separator:ab6aacc5a49a155b55afafd5bec754c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf54a53fd49ce8820d1b04c795abcf29"><td class="memItemLeft" align="right" valign="top">typedef IN UINTN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#acf54a53fd49ce8820d1b04c795abcf29">FieldOffset</a></td></tr>
<tr class="separator:acf54a53fd49ce8820d1b04c795abcf29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68c81326afc504b9e1a0cb4b2596964e"><td class="memItemLeft" align="right" valign="top">typedef IN UINTN IN UINTN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a68c81326afc504b9e1a0cb4b2596964e">FieldSize</a></td></tr>
<tr class="separator:a68c81326afc504b9e1a0cb4b2596964e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c4622c42086bd4633e8ee262358220b"><td class="memItemLeft" align="right" valign="top">typedef IN UINTN IN UINTN IN UINTN&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a6c4622c42086bd4633e8ee262358220b">BufferSize</a></td></tr>
<tr class="separator:a6c4622c42086bd4633e8ee262358220b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24d77a6e98922a6659db41fafc44560f"><td class="memItemLeft" align="right" valign="top">typedef IN UINTN IN UINTN IN <br class="typebreak"/>
UINTN OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a24d77a6e98922a6659db41fafc44560f">Buffer</a></td></tr>
<tr class="separator:a24d77a6e98922a6659db41fafc44560f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6fbbcd0f26087b3614e24064a140cf8"><td class="memItemLeft" align="right" valign="top">typedef IN UINTN IN UINTN IN UINT64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#ab6fbbcd0f26087b3614e24064a140cf8">Value</a></td></tr>
<tr class="separator:ab6fbbcd0f26087b3614e24064a140cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4001bbcbde995b1a3b7cd3d2e7d492e7"><td class="memItemLeft" align="right" valign="top">typedef OUT UINT64 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a4001bbcbde995b1a3b7cd3d2e7d492e7">DeviceFeatures</a></td></tr>
<tr class="separator:a4001bbcbde995b1a3b7cd3d2e7d492e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75886259cb3cff9e3884279807834c1d"><td class="memItemLeft" align="right" valign="top">typedef IN UINT64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a75886259cb3cff9e3884279807834c1d">Features</a></td></tr>
<tr class="separator:a75886259cb3cff9e3884279807834c1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f00e71da7561b92d4924692680bd38c"><td class="memItemLeft" align="right" valign="top">typedef IN <a class="el" href="struct_v_r_i_n_g.html">VRING</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a2f00e71da7561b92d4924692680bd38c">Ring</a></td></tr>
<tr class="separator:a2f00e71da7561b92d4924692680bd38c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4576ce15790aff63b8880dc9f2badcdd"><td class="memItemLeft" align="right" valign="top">typedef IN <a class="el" href="struct_v_r_i_n_g.html">VRING</a> IN UINT64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a4576ce15790aff63b8880dc9f2badcdd">RingBaseShift</a></td></tr>
<tr class="separator:a4576ce15790aff63b8880dc9f2badcdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6251296ffd662374e3398b01de09e35e"><td class="memItemLeft" align="right" valign="top">typedef IN UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a6251296ffd662374e3398b01de09e35e">Index</a></td></tr>
<tr class="separator:a6251296ffd662374e3398b01de09e35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4efbabfe720373ccf918999d9dfccfcd"><td class="memItemLeft" align="right" valign="top">typedef IN <a class="el" href="_xen_bus_8h.html#aa0673361ea749da32bbeeffdab834abb">UINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a4efbabfe720373ccf918999d9dfccfcd">Alignment</a></td></tr>
<tr class="separator:a4efbabfe720373ccf918999d9dfccfcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36c7442cb739e139b0da2bb3b4ea638e"><td class="memItemLeft" align="right" valign="top">typedef IN <a class="el" href="_xen_bus_8h.html#aa0673361ea749da32bbeeffdab834abb">UINT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a36c7442cb739e139b0da2bb3b4ea638e">PageSize</a></td></tr>
<tr class="separator:a36c7442cb739e139b0da2bb3b4ea638e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8badce9a67deae108e7e74f5449dcb23"><td class="memItemLeft" align="right" valign="top">typedef OUT UINT16 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a8badce9a67deae108e7e74f5449dcb23">QueueNumMax</a></td></tr>
<tr class="separator:a8badce9a67deae108e7e74f5449dcb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65154637eaaf40f80aafbff39931bb1"><td class="memItemLeft" align="right" valign="top">typedef IN UINT16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#ab65154637eaaf40f80aafbff39931bb1">QueueSize</a></td></tr>
<tr class="separator:ab65154637eaaf40f80aafbff39931bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf6cf224405aec9423207ca1d9c54b31"><td class="memItemLeft" align="right" valign="top">typedef OUT UINT8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#acf6cf224405aec9423207ca1d9c54b31">DeviceStatus</a></td></tr>
<tr class="separator:acf6cf224405aec9423207ca1d9c54b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c54399920df7febd77c83c15f1e241"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_virtio_device_8h.html#a74d7020e18780b17f5f8ca0573b29482">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a86c54399920df7febd77c83c15f1e241">VIRTIO_ALLOCATE_SHARED</a> )(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN UINTN Pages, IN OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> **<a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a>)</td></tr>
<tr class="separator:a86c54399920df7febd77c83c15f1e241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9c4580a8c735a9d3a27b948665c2c1"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#adf9c4580a8c735a9d3a27b948665c2c1">VIRTIO_FREE_SHARED</a> )(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN UINTN Pages, IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *<a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a>)</td></tr>
<tr class="separator:adf9c4580a8c735a9d3a27b948665c2c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55423277e6c247f85eb6d4721576fef1"><td class="memItemLeft" align="right" valign="top">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a55423277e6c247f85eb6d4721576fef1">Operation</a></td></tr>
<tr class="separator:a55423277e6c247f85eb6d4721576fef1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7304d074ddc5990804d4b68e2434255e"><td class="memItemLeft" align="right" valign="top">typedef IN <br class="typebreak"/>
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a></td></tr>
<tr class="separator:a7304d074ddc5990804d4b68e2434255e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b101dd0e307d46720705ec087cb0c0"><td class="memItemLeft" align="right" valign="top">typedef IN <br class="typebreak"/>
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> <br class="typebreak"/>
IN OUT UINTN *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a03b101dd0e307d46720705ec087cb0c0">NumberOfBytes</a></td></tr>
<tr class="separator:a03b101dd0e307d46720705ec087cb0c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c40563baf4c5d7426229bf2f160b455"><td class="memItemLeft" align="right" valign="top">typedef IN <br class="typebreak"/>
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> <br class="typebreak"/>
IN OUT UINTN OUT <br class="typebreak"/>
EFI_PHYSICAL_ADDRESS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a4c40563baf4c5d7426229bf2f160b455">DeviceAddress</a></td></tr>
<tr class="separator:a4c40563baf4c5d7426229bf2f160b455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286147d373e39bf0562dc60dbfbba621"><td class="memItemLeft" align="right" valign="top">typedef IN <br class="typebreak"/>
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> <br class="typebreak"/>
IN OUT UINTN OUT <br class="typebreak"/>
EFI_PHYSICAL_ADDRESS OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a286147d373e39bf0562dc60dbfbba621">Mapping</a></td></tr>
<tr class="separator:a286147d373e39bf0562dc60dbfbba621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15dd4bdacad847975f92d5e087016f3b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_virtio_device_8h.html#a74d7020e18780b17f5f8ca0573b29482">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a15dd4bdacad847975f92d5e087016f3b">VIRTIO_UNMAP_SHARED</a> )(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *<a class="el" href="_virtio_device_8h.html#a286147d373e39bf0562dc60dbfbba621">Mapping</a>)</td></tr>
<tr class="separator:a15dd4bdacad847975f92d5e087016f3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa4ac52e19518658dbdaaf279ab7ea8ef"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> { <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8eface12f5d490b1eb3896ca51b09806d1cc">VirtioOperationBusMasterRead</a>, 
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8efad920b207c717eac1693b5aa10fa46216">VirtioOperationBusMasterWrite</a>, 
<a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8efa565131f3676e81b2ab880823f43754c9">VirtioOperationBusMasterCommonBuffer</a>
 }</td></tr>
<tr class="separator:aa4ac52e19518658dbdaaf279ab7ea8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a74d7020e18780b17f5f8ca0573b29482"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a74d7020e18780b17f5f8ca0573b29482">EFI_STATUS</a> (EFIAPI *VIRTIO_DEVICE_READ)(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This</td></tr>
<tr class="separator:a74d7020e18780b17f5f8ca0573b29482"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a19d08245f781c5670832cc938cad6fd1"><td class="memItemLeft" align="right" valign="top">EFI_GUID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_virtio_device_8h.html#a19d08245f781c5670832cc938cad6fd1">gVirtioDeviceProtocolGuid</a></td></tr>
<tr class="separator:a19d08245f781c5670832cc938cad6fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Virtio Device</p>
<p>DISCLAIMER: the VIRTIO_DEVICE_PROTOCOL introduced here is a work in progress, and should not be used outside of the EDK II tree.</p>
<p>Copyright (c) 2013, ARM Ltd. All rights reserved.<br/>
 Copyright (c) 2017, AMD Inc, All rights reserved.<br/>
</p>
<p>SPDX-License-Identifier: BSD-2-Clause-Patent </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a0e175eb8ef0b4465749856ede620b39a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTIO_DEVICE_PROTOCOL_GUID</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">  0xfa920010, 0x6785, 0x4941, {0xb6, 0xec, 0x49, 0x8c, 0x57, 0x9f, 0x16, 0x0a }\</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47557f83dd8011c4934465b9b523e0da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VIRTIO_SPEC_REVISION</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">major, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">minor, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">revision&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;((((major) &amp; 0xFF) &lt;&lt; 24) | (((minor) &amp; 0xFF) &lt;&lt; 16) | ((revision) &amp; 0xFFFF))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a4efbabfe720373ccf918999d9dfccfcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_xen_bus_8h.html#aa0673361ea749da32bbeeffdab834abb">UINT32</a> <a class="el" href="_virtio_device_8h.html#a4efbabfe720373ccf918999d9dfccfcd">Alignment</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a24d77a6e98922a6659db41fafc44560f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINTN IN UINTN IN UINTN OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a>* <a class="el" href="_virtio_device_8h.html#a24d77a6e98922a6659db41fafc44560f">Buffer</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6c4622c42086bd4633e8ee262358220b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINTN IN UINTN IN UINTN <a class="el" href="_virtio_device_8h.html#a6c4622c42086bd4633e8ee262358220b">BufferSize</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c40563baf4c5d7426229bf2f160b455"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> IN OUT UINTN OUT EFI_PHYSICAL_ADDRESS* <a class="el" href="_virtio_device_8h.html#a4c40563baf4c5d7426229bf2f160b455">DeviceAddress</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4001bbcbde995b1a3b7cd3d2e7d492e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef OUT UINT64* <a class="el" href="_virtio_device_8h.html#a4001bbcbde995b1a3b7cd3d2e7d492e7">DeviceFeatures</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acf6cf224405aec9423207ca1d9c54b31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINT8 <a class="el" href="_virtio_device_8h.html#acf6cf224405aec9423207ca1d9c54b31">DeviceStatus</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a75886259cb3cff9e3884279807834c1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINT64 <a class="el" href="_virtio_device_8h.html#a75886259cb3cff9e3884279807834c1d">Features</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acf54a53fd49ce8820d1b04c795abcf29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINTN <a class="el" href="_virtio_device_8h.html#acf54a53fd49ce8820d1b04c795abcf29">FieldOffset</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a68c81326afc504b9e1a0cb4b2596964e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINTN IN UINTN <a class="el" href="_virtio_device_8h.html#a68c81326afc504b9e1a0cb4b2596964e">FieldSize</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7304d074ddc5990804d4b68e2434255e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a>* <a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6251296ffd662374e3398b01de09e35e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINT16 <a class="el" href="_virtio_device_8h.html#a6251296ffd662374e3398b01de09e35e">Index</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a286147d373e39bf0562dc60dbfbba621"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> IN OUT UINTN OUT EFI_PHYSICAL_ADDRESS OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a>** <a class="el" href="_virtio_device_8h.html#a286147d373e39bf0562dc60dbfbba621">Mapping</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a03b101dd0e307d46720705ec087cb0c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> IN OUT UINTN* <a class="el" href="_virtio_device_8h.html#a03b101dd0e307d46720705ec087cb0c0">NumberOfBytes</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a55423277e6c247f85eb6d4721576fef1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a> <a class="el" href="_virtio_device_8h.html#a55423277e6c247f85eb6d4721576fef1">Operation</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a36c7442cb739e139b0da2bb3b4ea638e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="_xen_bus_8h.html#aa0673361ea749da32bbeeffdab834abb">UINT32</a> <a class="el" href="_virtio_device_8h.html#a36c7442cb739e139b0da2bb3b4ea638e">PageSize</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8badce9a67deae108e7e74f5449dcb23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef OUT UINT16* <a class="el" href="_virtio_device_8h.html#a8badce9a67deae108e7e74f5449dcb23">QueueNumMax</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab65154637eaaf40f80aafbff39931bb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINT16 <a class="el" href="_virtio_device_8h.html#ab65154637eaaf40f80aafbff39931bb1">QueueSize</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2f00e71da7561b92d4924692680bd38c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="struct_v_r_i_n_g.html">VRING</a>* <a class="el" href="_virtio_device_8h.html#a2f00e71da7561b92d4924692680bd38c">Ring</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4576ce15790aff63b8880dc9f2badcdd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN <a class="el" href="struct_v_r_i_n_g.html">VRING</a> IN UINT64 <a class="el" href="_virtio_device_8h.html#a4576ce15790aff63b8880dc9f2badcdd">RingBaseShift</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab6fbbcd0f26087b3614e24064a140cf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef IN UINTN IN UINTN IN UINT64 <a class="el" href="_virtio_device_8h.html#ab6fbbcd0f26087b3614e24064a140cf8">Value</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a86c54399920df7febd77c83c15f1e241"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_virtio_device_8h.html#a74d7020e18780b17f5f8ca0573b29482">EFI_STATUS</a>(EFIAPI * VIRTIO_ALLOCATE_SHARED)(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN UINTN Pages, IN OUT <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> **<a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates pages that are suitable for an VirtioOperationBusMasterCommonBuffer mapping. This means that the buffer allocated by this function supports simultaneous access by both the processor and the bus master. The device address that the bus master uses to access the buffer must be retrieved with a call to VIRTIO_MAP_SHARED.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>The protocol instance pointer.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Pages</td><td>The number of pages to allocate.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">HostAddress</td><td>A pointer to store the system memory base address of the allocated range.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The requested memory pages were allocated. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The memory pages could not be allocated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab6aacc5a49a155b55afafd5bec754c84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___v_i_r_t_i_o___d_e_v_i_c_e___p_r_o_t_o_c_o_l.html">_VIRTIO_DEVICE_PROTOCOL</a> <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adf9c4580a8c735a9d3a27b948665c2c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a>(EFIAPI * VIRTIO_FREE_SHARED)(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN UINTN Pages, IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *<a class="el" href="_virtio_device_8h.html#a7304d074ddc5990804d4b68e2434255e">HostAddress</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees memory that was allocated with VIRTIO_ALLOCATE_SHARED.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>The protocol instance pointer.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Pages</td><td>The number of pages to free.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">HostAddress</td><td>The system memory base address of the allocated range. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a15dd4bdacad847975f92d5e087016f3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_virtio_device_8h.html#a74d7020e18780b17f5f8ca0573b29482">EFI_STATUS</a>(EFIAPI * VIRTIO_UNMAP_SHARED)(IN <a class="el" href="_virtio_device_8h.html#ab6aacc5a49a155b55afafd5bec754c84">VIRTIO_DEVICE_PROTOCOL</a> *This, IN <a class="el" href="_xen_bus_8h.html#a232bfc9995687270dc37edef69b3ac4f">VOID</a> *<a class="el" href="_virtio_device_8h.html#a286147d373e39bf0562dc60dbfbba621">Mapping</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Completes the VIRTIO_MAP_SHARED operation and releases any corresponding resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>The protocol instance pointer.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Mapping</td><td>The mapping token returned from VIRTIO_MAP_SHARED.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The range was unmapped. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Mapping is not a value that was returned by VIRTIO_MAP_SHARED. Passing an invalid Mapping token can cause undefined behavior. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The data was not committed to the target system memory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="aa4ac52e19518658dbdaaf279ab7ea8ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_virtio_device_8h.html#aa4ac52e19518658dbdaaf279ab7ea8ef">VIRTIO_MAP_OPERATION</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="aa4ac52e19518658dbdaaf279ab7ea8eface12f5d490b1eb3896ca51b09806d1cc"></a>VirtioOperationBusMasterRead</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa4ac52e19518658dbdaaf279ab7ea8efad920b207c717eac1693b5aa10fa46216"></a>VirtioOperationBusMasterWrite</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="aa4ac52e19518658dbdaaf279ab7ea8efa565131f3676e81b2ab880823f43754c9"></a>VirtioOperationBusMasterCommonBuffer</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a74d7020e18780b17f5f8ca0573b29482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef EFI_STATUS </td>
          <td>(</td>
          <td class="paramtype">EFIAPI *&#160;</td>
          <td class="paramname"><em>VIRTIO_MAP_SHARED</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a word from the device-specific I/O region of the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FieldOffset</td><td>Source offset.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FieldSize</td><td>Source field size in bytes, must be in {1, 2, 4, 8}.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">BufferSize</td><td>Number of bytes available in the target buffer. Must equal FieldSize.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Buffer</td><td>Target buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was read successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and read size. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The request could not be completed due to a lack of resources. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>One or more parameters are invalid.</td></tr>
  </table>
  </dd>
</dl>
<p>Write a word to the device-specific I/O region of the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FieldOffset</td><td>Destination offset.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">FieldSize</td><td>Destination field size in bytes, must be in {1, 2, 4, 8}.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Value</td><td>Value to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The request could not be completed due to a lack of resources. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>One or more parameters are invalid.</td></tr>
  </table>
  </dd>
</dl>
<p>Read the device features field from the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">DeviceFeatures</td><td>The device features field.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was read successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and read size. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>DeviceFeatures is NULL</td></tr>
  </table>
  </dd>
</dl>
<p>Write the guest features field in the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Features</td><td>The guest features field</td></tr>
  </table>
  </dd>
</dl>
<p>Write the queue address field(s) in the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Ring</td><td>The initialized <a class="el" href="struct_v_r_i_n_g.html">VRING</a> object to take the addresses from. The caller is responsible for ensuring that on input, all Ring-&gt;NumPages pages, starting at Ring-&gt;Base, have been successfully mapped with a single call to This-&gt;MapSharedBuffer() for CommonBuffer bus master operation.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">RingBaseShift</td><td>Adding this value using UINT64 arithmetic to the addresses found in Ring translates them from system memory to bus addresses. The caller shall calculate RingBaseShift as (DeviceAddress - (UINT64)(UINTN)HostAddress), where DeviceAddress and HostAddress (i.e., Ring-&gt;Base) were output and input parameters of This-&gt;MapSharedBuffer(), respectively.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Write the queue select field in the Virtio Header.</p>
<p>Writing to the queue select field sets the index of the queue to which operations such as SetQueueAlign and GetQueueNumMax apply.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Index</td><td>The index of the queue to select</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Write the queue notify field in the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Address</td><td>The 32-bit Queue Notify field</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Write the queue alignment field in the Virtio Header.</p>
<p>The queue to which the alignment applies is selected by the Queue Select field.</p>
<p>Note: This operation is not implemented by the VirtIo over PCI. The PCI implementation of this protocol returns EFI_SUCCESS.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Alignment</td><td>The alignment boundary of the Used Ring in bytes. Must be a power of 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Write the guest page size.</p>
<p>Note: This operation is not implemented by the VirtIo over PCI. The PCI implementation of this protocol returns EFI_SUCCESS.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">PageSize</td><td>Size of the Guest page in bytes. Must be a power of 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Get the size of the virtqueue selected by the queue select field.</p>
<p>See Virtio spec Section 2.3</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">QueueNumMax</td><td>The size of the virtqueue in bytes. Always a power of 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was read successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and read size. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>QueueNumMax is NULL</td></tr>
  </table>
  </dd>
</dl>
<p>Write to the QueueNum field in the Virtio Header.</p>
<p>This function only applies to Virtio-MMIO and may be a stub for other implementations. See Virtio Spec appendix X.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">QueueSize</td><td>The number of elements in the queue.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Get the DeviceStatus field from the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">DeviceStatus</td><td>The 8-bit value for the Device status field</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was read successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and read size. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>DeviceStatus is NULL</td></tr>
  </table>
  </dd>
</dl>
<p>Write the DeviceStatus field in the Virtio Header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>This instance of VIRTIO_DEVICE_PROTOCOL</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DeviceStatus</td><td>The 8-bit value for the Device status field</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The data was written successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The underlying IO device doesn't support the provided address offset and write size.</td></tr>
  </table>
  </dd>
</dl>
<p>Provides the virtio device address required to access system memory from a DMA bus master.</p>
<p>The interface follows the same usage pattern as defined in UEFI spec 2.6 (Section 13.2 PCI Root Bridge I/O Protocol)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>The protocol instance pointer.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Operation</td><td>Indicates if the bus master is going to read or write to system memory.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">HostAddress</td><td>The system memory address to map to shared buffer address.</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">NumberOfBytes</td><td>On input the number of bytes to map. On output the number of bytes that were mapped.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">DeviceAddress</td><td>The resulting shared map address for the bus master to access the hosts HostAddress.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Mapping</td><td>A resulting token to pass to VIRTIO_UNMAP_SHARED.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The range was mapped for the returned NumberOfBytes. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The HostAddress cannot be mapped as a common buffer. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>One or more parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The request could not be completed due to a lack of resources. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The system hardware could not map the requested address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a19d08245f781c5670832cc938cad6fd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_GUID gVirtioDeviceProtocolGuid</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_782809600008140d37245a8991744230.html">OvmfPkg</a></li><li class="navelem"><a class="el" href="dir_65f9f3e48d1acd3a56b2b8a29723b724.html">Include</a></li><li class="navelem"><a class="el" href="dir_58e0e38684788f5ac59881d3ed075936.html">Protocol</a></li><li class="navelem"><a class="el" href="_virtio_device_8h.html">VirtioDevice.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 00:44:20 for OvmfPkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
