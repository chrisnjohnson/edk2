<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>IntelFsp2Pkg[all]: IntelFsp2Pkg/Include/Ppi/TempRamExitPpi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">IntelFsp2Pkg[all]
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_temp_ram_exit_ppi_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">TempRamExitPpi.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___f_s_p___t_e_m_p___r_a_m___e_x_i_t___p_p_i.html">_FSP_TEMP_RAM_EXIT_PPI</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1ec2665fb3a6cad710f7a74aa34cfd70"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_temp_ram_exit_ppi_8h.html#a1ec2665fb3a6cad710f7a74aa34cfd70">FSP_TEMP_RAM_EXIT_GUID</a></td></tr>
<tr class="separator:a1ec2665fb3a6cad710f7a74aa34cfd70"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a28b69f932966252e439a46daf511115d"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct___f_s_p___t_e_m_p___r_a_m___e_x_i_t___p_p_i.html">_FSP_TEMP_RAM_EXIT_PPI</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_temp_ram_exit_ppi_8h.html#a28b69f932966252e439a46daf511115d">FSP_TEMP_RAM_EXIT_PPI</a></td></tr>
<tr class="separator:a28b69f932966252e439a46daf511115d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0c332916466004ab61fb8ec17c39d82f"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_temp_ram_exit_ppi_8h.html#a0c332916466004ab61fb8ec17c39d82f">EFI_STATUS</a> (EFIAPI *FSP_TEMP_RAM_EXIT)(IN VOID *TempRamExitParamPtr)</td></tr>
<tr class="separator:a0c332916466004ab61fb8ec17c39d82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a9313ab3787ac19f28652f27d24cf7a64"><td class="memItemLeft" align="right" valign="top">EFI_GUID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_temp_ram_exit_ppi_8h.html#a9313ab3787ac19f28652f27d24cf7a64">gFspTempRamExitPpiGuid</a></td></tr>
<tr class="separator:a9313ab3787ac19f28652f27d24cf7a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file defines the Silicon Temp Ram Exit PPI which implements the required programming steps for disabling temporary memory.</p>
<p>Copyright (c) 2019, Intel Corporation. All rights reserved.<br/>
 SPDX-License-Identifier: BSD-2-Clause-Patent </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1ec2665fb3a6cad710f7a74aa34cfd70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FSP_TEMP_RAM_EXIT_GUID</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">    0xbc1cfbdb, 0x7e50, 0x42be, { 0xb4, 0x87, 0x22, 0xe0, 0xa9, 0x0c, 0xb0, 0x52 } \</div>
<div class="line">  }</div>
</div><!-- fragment --><p>Global ID for the FSP_TEMP_RAM_EXIT_PPI. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a28b69f932966252e439a46daf511115d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___f_s_p___t_e_m_p___r_a_m___e_x_i_t___p_p_i.html">_FSP_TEMP_RAM_EXIT_PPI</a> <a class="el" href="_temp_ram_exit_ppi_8h.html#a28b69f932966252e439a46daf511115d">FSP_TEMP_RAM_EXIT_PPI</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0c332916466004ab61fb8ec17c39d82f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef EFI_STATUS </td>
          <td>(</td>
          <td class="paramtype">EFIAPI *&#160;</td>
          <td class="paramname"><em>FSP_TEMP_RAM_EXIT</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Silicon function for disabling temporary memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TempRamExitParamPtr</td><td>- Pointer to the TempRamExit parameters structure. This structure is normally defined in the Integration Guide. If it is not defined in the Integration Guide, pass NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>- FSP execution environment was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>- Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>- The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>- Temporary memory exit.</td></tr>
  </table>
  </dd>
</dl>
<p>This FSP API is called soon after coming out of reset and before memory and stack is available. This FSP API will load the microcode update, enable code caching for the region specified by the boot loader and also setup a temporary stack to be used until main memory is initialized.</p>
<p>A hardcoded stack can be set up with the following values, and the "esp" register initialized to point to this hardcoded stack.</p>
<ol type="1">
<li>The return address where the FSP will return control after setting up a temporary stack.</li>
<li>A pointer to the input parameter structure</li>
</ol>
<p>However, since the stack is in ROM and not writeable, this FSP API cannot be called using the "call" instruction, but needs to be jumped to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">FsptUpdDataPtr</td><td>Pointer to the FSPT_UPD data structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>Temporary RAM was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>Temp RAM initialization failed.</td></tr>
  </table>
  </dd>
</dl>
<p>If this function is successful, the FSP initializes the ECX and EDX registers to point to a temporary but writeable memory range available to the boot loader and returns with FSP_SUCCESS in register EAX. Register ECX points to the start of this temporary memory range and EDX points to the end of the range. Boot loader is free to use the whole range described. Typically the boot loader can reload the ESP register to point to the end of this returned range so that it can be used as a standard stack.</p>
<p>This FSP API is used to notify the FSP about the different phases in the boot process. This allows the FSP to take appropriate actions as needed during different initialization phases. The phases will be platform dependent and will be documented with the FSP release. The current FSP supports two notify phases: Post PCI enumeration Ready To Boot</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">NotifyPhaseParamPtr</td><td>Address pointer to the NOTIFY_PHASE_PRAMS</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The notification was handled successfully. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The notification was not called in the proper order. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>The notification code is invalid.</td></tr>
  </table>
  </dd>
</dl>
<p>This FSP API is called after TempRamInit and initializes the memory. This FSP API accepts a pointer to a data structure that will be platform dependent and defined for each FSP binary. This will be documented in Integration guide with each FSP release. After FspMemInit completes its execution, it passes the pointer to the HobList and returns to the boot loader from where it was called. BootLoader is responsible to migrate its stack and data to Memory. FspMemoryInit, TempRamExit and FspSiliconInit APIs provide an alternate method to complete the silicon initialization and provides bootloader an opportunity to get control after system memory is available and before the temporary RAM is torn down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">FspmUpdDataPtr</td><td>Pointer to the FSPM_UPD data structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">HobListPtr</td><td>Pointer to receive the address of the HOB list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>FSP execution environment was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>FSP initialization failed. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>Stack range requested by FSP is not met. </td></tr>
    <tr><td class="paramname">FSP_STATUS_RESET_REQUIREDx</td><td>A reset is reuired. These status codes will not be returned during S3.</td></tr>
  </table>
  </dd>
</dl>
<p>This FSP API is called after FspMemoryInit API. This FSP API tears down the temporary memory setup by TempRamInit API. This FSP API accepts a pointer to a data structure that will be platform dependent and defined for each FSP binary. This will be documented in Integration Guide. FspMemoryInit, TempRamExit and FspSiliconInit APIs provide an alternate method to complete the silicon initialization and provides bootloader an opportunity to get control after system memory is available and before the temporary RAM is torn down.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">TempRamExitParamPtr</td><td>Pointer to the Temp Ram Exit parameters structure. This structure is normally defined in the Integration Guide. And if it is not defined in the Integration Guide, pass NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>FSP execution environment was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>FSP initialization failed.</td></tr>
  </table>
  </dd>
</dl>
<p>This FSP API is called after TempRamExit API. FspMemoryInit, TempRamExit and FspSiliconInit APIs provide an alternate method to complete the silicon initialization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">FspsUpdDataPtr</td><td>Pointer to the FSPS_UPD data structure. If NULL, FSP will use the default parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>FSP execution environment was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>FSP initialization failed. </td></tr>
    <tr><td class="paramname">FSP_STATUS_RESET_REQUIREDx</td><td>A reset is required. These status codes will not be returned during S3.</td></tr>
  </table>
  </dd>
</dl>
<p>This FSP API is expected to be called after FspSiliconInit but before FspNotifyPhase. This FSP API provides multi-phase silicon initialization; which brings greater modularity beyond the existing FspSiliconInit() API. Increased modularity is achieved by adding an extra API to FSP-S. This allows the bootloader to add board specific initialization steps throughout the SiliconInit flow as needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname"><a class="el" href="struct_f_s_p___m_u_l_t_i___p_h_a_s_e___p_a_r_a_m_s.html">FSP_MULTI_PHASE_PARAMS</a></td><td>For action - EnumMultiPhaseGetNumberOfPhases: FSP_MULTI_PHASE_PARAMS-&gt;MultiPhaseParamPtr will contain how many phases supported by FSP. For action - EnumMultiPhaseExecutePhase: FSP_MULTI_PHASE_PARAMS-&gt;MultiPhaseParamPtr shall be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>FSP execution environment was initialized successfully. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Input parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The FSP calling conditions were not met. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>FSP initialization failed. </td></tr>
    <tr><td class="paramname">FSP_STATUS_RESET_REQUIREDx</td><td>A reset is required. These status codes will not be returned during S3. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9313ab3787ac19f28652f27d24cf7a64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_GUID gFspTempRamExitPpiGuid</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_83f6a4b575a9931e857367aa2d5fd506.html">IntelFsp2Pkg</a></li><li class="navelem"><a class="el" href="dir_4a8aefff47ff8cfb9155bb21318a1f57.html">Include</a></li><li class="navelem"><a class="el" href="dir_ec5ddd40e153d5b19f1eb8c3b30bf47f.html">Ppi</a></li><li class="navelem"><a class="el" href="_temp_ram_exit_ppi_8h.html">TempRamExitPpi.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 00:24:06 for IntelFsp2Pkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
