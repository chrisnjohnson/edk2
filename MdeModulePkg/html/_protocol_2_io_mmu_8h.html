<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MdeModulePkg[all]: MdeModulePkg/Include/Protocol/IoMmu.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MdeModulePkg[all]
   &#160;<span id="projectnumber">0.98</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_protocol_2_io_mmu_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">IoMmu.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct___e_d_k_i_i___i_o_m_m_u___p_r_o_t_o_c_o_l.html">_EDKII_IOMMU_PROTOCOL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a045ea098471009804a58a5dc2ae05743"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a045ea098471009804a58a5dc2ae05743">EDKII_IOMMU_PROTOCOL_GUID</a></td></tr>
<tr class="separator:a045ea098471009804a58a5dc2ae05743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dcb4ef32635b72a5ab3377a09021fc4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a7dcb4ef32635b72a5ab3377a09021fc4">EDKII_IOMMU_PROTOCOL_REVISION</a>&#160;&#160;&#160;0x00010000</td></tr>
<tr class="separator:a7dcb4ef32635b72a5ab3377a09021fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897ee5d56bcf474a8ce2d0e88da0e0af"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a897ee5d56bcf474a8ce2d0e88da0e0af">EDKII_IOMMU_ACCESS_READ</a>&#160;&#160;&#160;0x1</td></tr>
<tr class="separator:a897ee5d56bcf474a8ce2d0e88da0e0af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b2eebefbe1f205d45531dca3023cb77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a7b2eebefbe1f205d45531dca3023cb77">EDKII_IOMMU_ACCESS_WRITE</a>&#160;&#160;&#160;0x2</td></tr>
<tr class="separator:a7b2eebefbe1f205d45531dca3023cb77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6fc8bb9b931a78c49160bc9153486b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#af6fc8bb9b931a78c49160bc9153486b9">EDKII_IOMMU_ATTRIBUTE_MEMORY_WRITE_COMBINE</a>&#160;&#160;&#160;0x0080</td></tr>
<tr class="separator:af6fc8bb9b931a78c49160bc9153486b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d2d9fdfce6838b16c7b6afc3952d92"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a25d2d9fdfce6838b16c7b6afc3952d92">EDKII_IOMMU_ATTRIBUTE_MEMORY_CACHED</a>&#160;&#160;&#160;0x0800</td></tr>
<tr class="separator:a25d2d9fdfce6838b16c7b6afc3952d92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1878ef3507eeb37bab19fa860abeaae6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a1878ef3507eeb37bab19fa860abeaae6">EDKII_IOMMU_ATTRIBUTE_DUAL_ADDRESS_CYCLE</a>&#160;&#160;&#160;0x8000</td></tr>
<tr class="separator:a1878ef3507eeb37bab19fa860abeaae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f551a33ad8e1b90d4cbc64bc7ee326"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a34f551a33ad8e1b90d4cbc64bc7ee326">EDKII_IOMMU_ATTRIBUTE_VALID_FOR_ALLOCATE_BUFFER</a>&#160;&#160;&#160;(<a class="el" href="_protocol_2_io_mmu_8h.html#af6fc8bb9b931a78c49160bc9153486b9">EDKII_IOMMU_ATTRIBUTE_MEMORY_WRITE_COMBINE</a> | <a class="el" href="_protocol_2_io_mmu_8h.html#a25d2d9fdfce6838b16c7b6afc3952d92">EDKII_IOMMU_ATTRIBUTE_MEMORY_CACHED</a> | <a class="el" href="_protocol_2_io_mmu_8h.html#a1878ef3507eeb37bab19fa860abeaae6">EDKII_IOMMU_ATTRIBUTE_DUAL_ADDRESS_CYCLE</a>)</td></tr>
<tr class="separator:a34f551a33ad8e1b90d4cbc64bc7ee326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e71a8bc49dc5ca66e610d573059fc2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#ad8e71a8bc49dc5ca66e610d573059fc2">EDKII_IOMMU_ATTRIBUTE_INVALID_FOR_ALLOCATE_BUFFER</a>&#160;&#160;&#160;(~<a class="el" href="_protocol_2_io_mmu_8h.html#a34f551a33ad8e1b90d4cbc64bc7ee326">EDKII_IOMMU_ATTRIBUTE_VALID_FOR_ALLOCATE_BUFFER</a>)</td></tr>
<tr class="separator:ad8e71a8bc49dc5ca66e610d573059fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a02b273e11cbfd357e7c308103ae22a57"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="struct___e_d_k_i_i___i_o_m_m_u___p_r_o_t_o_c_o_l.html">_EDKII_IOMMU_PROTOCOL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a></td></tr>
<tr class="separator:a02b273e11cbfd357e7c308103ae22a57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43c67ee134580d9f90f5983626cc3a2"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#aa43c67ee134580d9f90f5983626cc3a2">EDKII_IOMMU_SET_ATTRIBUTE</a> )(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN EFI_HANDLE DeviceHandle, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *Mapping, IN UINT64 IoMmuAccess)</td></tr>
<tr class="separator:aa43c67ee134580d9f90f5983626cc3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f135d6b50bf4bb96cf1af186b1ec97"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a44f135d6b50bf4bb96cf1af186b1ec97">EDKII_IOMMU_MAP</a> )(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32">EDKII_IOMMU_OPERATION</a> Operation, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *HostAddress, IN OUT <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> *NumberOfBytes, OUT EFI_PHYSICAL_ADDRESS *DeviceAddress, OUT <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> **Mapping)</td></tr>
<tr class="separator:a44f135d6b50bf4bb96cf1af186b1ec97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d92d805db905e2097b1b24abc3df52"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a46d92d805db905e2097b1b24abc3df52">EDKII_IOMMU_UNMAP</a> )(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *Mapping)</td></tr>
<tr class="separator:a46d92d805db905e2097b1b24abc3df52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebb2c63c837dcabeaa2ccebbe9b6922b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#aebb2c63c837dcabeaa2ccebbe9b6922b">EDKII_IOMMU_ALLOCATE_BUFFER</a> )(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN EFI_ALLOCATE_TYPE Type, IN EFI_MEMORY_TYPE <a class="el" href="_memory_profile_8h.html#ab2e461f72cc1ddc0fa5206efdcbd7b7f">MemoryType</a>, IN <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> Pages, IN OUT <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> **HostAddress, IN UINT64 Attributes)</td></tr>
<tr class="separator:aebb2c63c837dcabeaa2ccebbe9b6922b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2191f73516f014e9275f5195fd075d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#aee2191f73516f014e9275f5195fd075d">EDKII_IOMMU_FREE_BUFFER</a> )(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> Pages, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *HostAddress)</td></tr>
<tr class="separator:aee2191f73516f014e9275f5195fd075d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:affca8bdc935093298575deaaadc24f32"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32">EDKII_IOMMU_OPERATION</a> { <br/>
&#160;&#160;<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32acdaebf1dcfdd31526e9ef3342d1cd8b1">EdkiiIoMmuOperationBusMasterRead</a>, 
<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32a42581324359152193467a1ce2f1b1ce8">EdkiiIoMmuOperationBusMasterWrite</a>, 
<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32ab75f93d5ba2e7a128812ba78ce010347">EdkiiIoMmuOperationBusMasterCommonBuffer</a>, 
<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32aba2b8c60eef71230aa89abc3ca9d6271">EdkiiIoMmuOperationBusMasterRead64</a>, 
<br/>
&#160;&#160;<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32a73608714aaa4973c5f36d5787130bdd2">EdkiiIoMmuOperationBusMasterWrite64</a>, 
<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32aeb20a75ae7bc2b6113cb587c8563cf2c">EdkiiIoMmuOperationBusMasterCommonBuffer64</a>, 
<a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32aa0488cff3221f71ed6cff0524093841c">EdkiiIoMmuOperationMaximum</a>
<br/>
 }</td></tr>
<tr class="separator:affca8bdc935093298575deaaadc24f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2639673e1d36aa60a6644ef06967fc19"><td class="memItemLeft" align="right" valign="top">EFI_GUID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_2_io_mmu_8h.html#a2639673e1d36aa60a6644ef06967fc19">gEdkiiIoMmuProtocolGuid</a></td></tr>
<tr class="separator:a2639673e1d36aa60a6644ef06967fc19"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>EFI IOMMU Protocol.</p>
<p>Copyright (c) 2017, Intel Corporation. All rights reserved.<br/>
 SPDX-License-Identifier: BSD-2-Clause-Patent </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a897ee5d56bcf474a8ce2d0e88da0e0af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ACCESS_READ&#160;&#160;&#160;0x1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7b2eebefbe1f205d45531dca3023cb77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ACCESS_WRITE&#160;&#160;&#160;0x2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1878ef3507eeb37bab19fa860abeaae6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ATTRIBUTE_DUAL_ADDRESS_CYCLE&#160;&#160;&#160;0x8000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad8e71a8bc49dc5ca66e610d573059fc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ATTRIBUTE_INVALID_FOR_ALLOCATE_BUFFER&#160;&#160;&#160;(~<a class="el" href="_protocol_2_io_mmu_8h.html#a34f551a33ad8e1b90d4cbc64bc7ee326">EDKII_IOMMU_ATTRIBUTE_VALID_FOR_ALLOCATE_BUFFER</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a25d2d9fdfce6838b16c7b6afc3952d92"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ATTRIBUTE_MEMORY_CACHED&#160;&#160;&#160;0x0800</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af6fc8bb9b931a78c49160bc9153486b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ATTRIBUTE_MEMORY_WRITE_COMBINE&#160;&#160;&#160;0x0080</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a34f551a33ad8e1b90d4cbc64bc7ee326"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_ATTRIBUTE_VALID_FOR_ALLOCATE_BUFFER&#160;&#160;&#160;(<a class="el" href="_protocol_2_io_mmu_8h.html#af6fc8bb9b931a78c49160bc9153486b9">EDKII_IOMMU_ATTRIBUTE_MEMORY_WRITE_COMBINE</a> | <a class="el" href="_protocol_2_io_mmu_8h.html#a25d2d9fdfce6838b16c7b6afc3952d92">EDKII_IOMMU_ATTRIBUTE_MEMORY_CACHED</a> | <a class="el" href="_protocol_2_io_mmu_8h.html#a1878ef3507eeb37bab19fa860abeaae6">EDKII_IOMMU_ATTRIBUTE_DUAL_ADDRESS_CYCLE</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a045ea098471009804a58a5dc2ae05743"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_PROTOCOL_GUID</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div>
<div class="line">      0x4e939de9, 0xd948, 0x4b0f, { 0x88, 0xed, 0xe6, 0xe1, 0xce, 0x51, 0x7c, 0x1e } \</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7dcb4ef32635b72a5ab3377a09021fc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EDKII_IOMMU_PROTOCOL_REVISION&#160;&#160;&#160;0x00010000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aebb2c63c837dcabeaa2ccebbe9b6922b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI * EDKII_IOMMU_ALLOCATE_BUFFER)(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN EFI_ALLOCATE_TYPE Type, IN EFI_MEMORY_TYPE <a class="el" href="_memory_profile_8h.html#ab2e461f72cc1ddc0fa5206efdcbd7b7f">MemoryType</a>, IN <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> Pages, IN OUT <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> **HostAddress, IN UINT64 Attributes)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates pages that are suitable for an OperationBusMasterCommonBuffer or OperationBusMasterCommonBuffer64 mapping.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">This</td><td>The protocol instance pointer. </td></tr>
    <tr><td class="paramname">Type</td><td>This parameter is not used and must be ignored. </td></tr>
    <tr><td class="paramname">MemoryType</td><td>The type of memory to allocate, EfiBootServicesData or EfiRuntimeServicesData. </td></tr>
    <tr><td class="paramname">Pages</td><td>The number of pages to allocate. </td></tr>
    <tr><td class="paramname">HostAddress</td><td>A pointer to store the base system memory address of the allocated range. </td></tr>
    <tr><td class="paramname">Attributes</td><td>The requested bit mask of attributes for the allocated range.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The requested memory pages were allocated. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>Attributes is unsupported. The only legal attribute bits are MEMORY_WRITE_COMBINE, MEMORY_CACHED and DUAL_ADDRESS_CYCLE. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>One or more parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The memory pages could not be allocated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aee2191f73516f014e9275f5195fd075d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI * EDKII_IOMMU_FREE_BUFFER)(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> Pages, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *HostAddress)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees memory that was allocated with AllocateBuffer().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">This</td><td>The protocol instance pointer. </td></tr>
    <tr><td class="paramname">Pages</td><td>The number of pages to free. </td></tr>
    <tr><td class="paramname">HostAddress</td><td>The base system memory address of the allocated range.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The requested memory pages were freed. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>The memory range specified by HostAddress and Pages was not allocated with AllocateBuffer(). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a44f135d6b50bf4bb96cf1af186b1ec97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI * EDKII_IOMMU_MAP)(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32">EDKII_IOMMU_OPERATION</a> Operation, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *HostAddress, IN OUT <a class="el" href="_display_protocol_8h.html#a2181335bcdc6b2c3b39d1fc778d77a2e">UINTN</a> *NumberOfBytes, OUT EFI_PHYSICAL_ADDRESS *DeviceAddress, OUT <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> **Mapping)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provides the controller-specific addresses required to access system memory from a DMA bus master.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">This</td><td>The protocol instance pointer. </td></tr>
    <tr><td class="paramname">Operation</td><td>Indicates if the bus master is going to read or write to system memory. </td></tr>
    <tr><td class="paramname">HostAddress</td><td>The system memory address to map to the PCI controller. </td></tr>
    <tr><td class="paramname">NumberOfBytes</td><td>On input the number of bytes to map. On output the number of bytes that were mapped. </td></tr>
    <tr><td class="paramname">DeviceAddress</td><td>The resulting map address for the bus master PCI controller to use to access the hosts HostAddress. </td></tr>
    <tr><td class="paramname">Mapping</td><td>A resulting value to pass to Unmap().</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The range was mapped for the returned NumberOfBytes. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The HostAddress cannot be mapped as a common buffer. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>One or more parameters are invalid. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>The request could not be completed due to a lack of resources. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The system hardware could not map the requested address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a02b273e11cbfd357e7c308103ae22a57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct___e_d_k_i_i___i_o_m_m_u___p_r_o_t_o_c_o_l.html">_EDKII_IOMMU_PROTOCOL</a> <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa43c67ee134580d9f90f5983626cc3a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI * EDKII_IOMMU_SET_ATTRIBUTE)(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN EFI_HANDLE DeviceHandle, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *Mapping, IN UINT64 IoMmuAccess)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set IOMMU attribute for a system memory.</p>
<p>If the IOMMU protocol exists, the system memory cannot be used for DMA by default.</p>
<p>When a device requests a DMA access for a system memory, the device driver need use SetAttribute() to update the IOMMU attribute to request DMA access (read and/or write).</p>
<p>The DeviceHandle is used to identify which device submits the request. The IOMMU implementation need translate the device path to an IOMMU device ID, and set IOMMU hardware register accordingly. 1) DeviceHandle can be a standard PCI device. The memory for BusMasterRead need set EDKII_IOMMU_ACCESS_READ. The memory for BusMasterWrite need set EDKII_IOMMU_ACCESS_WRITE. The memory for BusMasterCommonBuffer need set EDKII_IOMMU_ACCESS_READ|EDKII_IOMMU_ACCESS_WRITE. After the memory is used, the memory need set 0 to keep it being protected. 2) DeviceHandle can be an ACPI device (ISA, I2C, SPI, etc). The memory for DMA access need set EDKII_IOMMU_ACCESS_READ and/or EDKII_IOMMU_ACCESS_WRITE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">This</td><td>The protocol instance pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">DeviceHandle</td><td>The device who initiates the DMA access request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Mapping</td><td>The mapping value returned from Map(). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">IoMmuAccess</td><td>The IOMMU access.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The IoMmuAccess is set for the memory range specified by DeviceAddress and Length. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>DeviceHandle is an invalid handle. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Mapping is not a value that was returned by Map(). </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>IoMmuAccess specified an illegal combination of access. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>DeviceHandle is unknown by the IOMMU. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The bit mask of IoMmuAccess is not supported by the IOMMU. </td></tr>
    <tr><td class="paramname">EFI_UNSUPPORTED</td><td>The IOMMU does not support the memory range specified by Mapping. </td></tr>
    <tr><td class="paramname">EFI_OUT_OF_RESOURCES</td><td>There are not enough resources available to modify the IOMMU access. </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The IOMMU device reported an error while attempting the operation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a46d92d805db905e2097b1b24abc3df52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_platform_boot_manager_8h.html#aaed96bd0619ee6b8526d64337e745391">EFI_STATUS</a>(EFIAPI * EDKII_IOMMU_UNMAP)(IN <a class="el" href="_protocol_2_io_mmu_8h.html#a02b273e11cbfd357e7c308103ae22a57">EDKII_IOMMU_PROTOCOL</a> *<a class="el" href="_sec_performance_8h.html#a921ccfa7b828b95b9fc9b5d75c935767">This</a>, IN <a class="el" href="_display_protocol_8h.html#ae9c54c060568c862c771ad80bb63bf48">VOID</a> *Mapping)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Completes the Map() operation and releases any corresponding resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">This</td><td>The protocol instance pointer. </td></tr>
    <tr><td class="paramname">Mapping</td><td>The mapping value returned from Map().</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EFI_SUCCESS</td><td>The range was unmapped. </td></tr>
    <tr><td class="paramname">EFI_INVALID_PARAMETER</td><td>Mapping is not a value that was returned by Map(). </td></tr>
    <tr><td class="paramname">EFI_DEVICE_ERROR</td><td>The data was not committed to the target system memory. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="affca8bdc935093298575deaaadc24f32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_protocol_2_io_mmu_8h.html#affca8bdc935093298575deaaadc24f32">EDKII_IOMMU_OPERATION</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32acdaebf1dcfdd31526e9ef3342d1cd8b1"></a>EdkiiIoMmuOperationBusMasterRead</em>&#160;</td><td class="fielddoc">
<p>A read operation from system memory by a bus master that is not capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32a42581324359152193467a1ce2f1b1ce8"></a>EdkiiIoMmuOperationBusMasterWrite</em>&#160;</td><td class="fielddoc">
<p>A write operation from system memory by a bus master that is not capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32ab75f93d5ba2e7a128812ba78ce010347"></a>EdkiiIoMmuOperationBusMasterCommonBuffer</em>&#160;</td><td class="fielddoc">
<p>Provides both read and write access to system memory by both the processor and a bus master that is not capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32aba2b8c60eef71230aa89abc3ca9d6271"></a>EdkiiIoMmuOperationBusMasterRead64</em>&#160;</td><td class="fielddoc">
<p>A read operation from system memory by a bus master that is capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32a73608714aaa4973c5f36d5787130bdd2"></a>EdkiiIoMmuOperationBusMasterWrite64</em>&#160;</td><td class="fielddoc">
<p>A write operation to system memory by a bus master that is capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32aeb20a75ae7bc2b6113cb587c8563cf2c"></a>EdkiiIoMmuOperationBusMasterCommonBuffer64</em>&#160;</td><td class="fielddoc">
<p>Provides both read and write access to system memory by both the processor and a bus master that is capable of producing PCI dual address cycles. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="affca8bdc935093298575deaaadc24f32aa0488cff3221f71ed6cff0524093841c"></a>EdkiiIoMmuOperationMaximum</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a2639673e1d36aa60a6644ef06967fc19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EFI_GUID gEdkiiIoMmuProtocolGuid</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IOMMU Protocol GUID variable. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_54cb27adfbe3c9131eabcdf8b02d1207.html">MdeModulePkg</a></li><li class="navelem"><a class="el" href="dir_18ec75d2ad33879c083782e393e99453.html">Include</a></li><li class="navelem"><a class="el" href="dir_c94902c572d0fa9f9eb7e8f9bbb107ef.html">Protocol</a></li><li class="navelem"><a class="el" href="_protocol_2_io_mmu_8h.html">IoMmu.h</a></li>
    <li class="footer">Generated on Sun Dec 5 2021 03:40:30 for MdeModulePkg[all] by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
